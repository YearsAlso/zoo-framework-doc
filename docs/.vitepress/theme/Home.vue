<template>
  <div class="holy-grail-container">
    <!-- åŠ¨ç‰©å›­ç†å¿µ - åœ£æ¯å¸ƒå±€ -->
    <div class="zoo-concept-section">
      <div class="zoo-concept-header">
        <h2>ğŸª åŠ¨ç‰©å›­ç†å¿µ</h2>
        <p>Zoo Framework çš„è®¾è®¡ç†å¿µæ¥è‡ªçœŸå®çš„åŠ¨ç‰©å›­ç®¡ç†ç³»ç»Ÿ</p>
      </div>

      <div class="holy-grail-body">
        <!-- å·¦ä¾§ï¼šæ ¸å¿ƒæ¦‚å¿µ -->
        <div class="left-sidebar">
          <h3>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</h3>
          <ul class="concept-list">
            <li v-for="item in concepts" :key="item.key">
              <span class="concept-icon">{{ item.icon }}</span>
              <div class="concept-text">
                <strong>{{ item.title }}</strong>
                <small>{{ item.desc }}</small>
              </div>
            </li>
          </ul>
        </div>

        <!-- ä¸­é—´ï¼šæ¶æ„å›¾ -->
        <div class="main-content">
          <h3>ğŸ›ï¸ åŠ¨ç‰©å›­æ¶æ„</h3>
          <pre class="mermaid">
graph TB
    M[ğŸ‘¨â€ğŸ’¼ Master å›­é•¿]

    subgraph "ğŸ  Cage Area"
        C1[ğŸ¦ ç‹®å­ç¬¼]
        C2[ğŸ’ çŒ´å­ç¬¼]
        C3[ğŸ¦¥ æ ‘æ‡’ç¬¼]
    end

    subgraph "ğŸ– Food Center"
        F[ğŸ“Š FIFO é˜Ÿåˆ—]
    end

    subgraph "ğŸ—ºï¸ State Center"
        S[ğŸ”„ çŠ¶æ€æœº]
    end

    M --> C1
    M --> C2
    M --> C3
    F --> C1
    F --> C2
    F --> C3
    C1 --> S
    C2 --> S
    C3 --> S
          </pre>
        </div>

        <!-- å³ä¾§ï¼šå·¥ä½œæµç¨‹ -->
        <div class="right-sidebar">
          <h3>ğŸ“‹ å·¥ä½œæµç¨‹</h3>
          <div v-for="step in workflow" :key="step.num" class="workflow-step">
            <span class="step-num">{{ step.num }}</span>
            <div class="step-content">
              <strong>{{ step.title }}</strong>
              <small>{{ step.desc }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- åŠ¨ç‰©ç±»å‹ -->
    <div class="animal-types-section">
      <div class="animal-types-header">
        <h2>ğŸ¦ Worker åŠ¨ç‰©ç±»å‹</h2>
      </div>
      <div class="animal-cards">
        <div v-for="animal in animals" :key="animal.key" class="animal-card" :class="animal.key">
          <div class="animal-emoji">{{ animal.emoji }}</div>
          <h4>{{ animal.name }}</h4>
          <p v-html="animal.desc"></p>
        </div>
      </div>
    </div>

    <!-- å¿«é€Ÿå¼€å§‹ -->
    <div class="quick-start-section">
      <div class="quick-start-header">
        <h2>ğŸš€ å¿«é€Ÿå…¥å›­</h2>
        <p>åªéœ€ 4 æ­¥ï¼Œæ­å»ºå±äºä½ çš„åŠ¨ç‰©å›­</p>
      </div>
      <div class="quick-steps">
        <div v-for="step in quickSteps" :key="step.key" class="quick-step">
          <div class="quick-step-header">
            <span class="step-icon">{{ step.icon }}</span>
            <strong>{{ step.title }}</strong>
          </div>
          <pre><code>{{ step.code }}</code></pre>
        </div>
      </div>
    </div>

    <!-- ä¸ºä»€ä¹ˆé€‰æ‹© -->
    <div class="why-section">
      <div class="why-header">
        <h2>ğŸŒŸ ä¸ºä»€ä¹ˆé€‰æ‹© Zoo Frameworkï¼Ÿ</h2>
      </div>
      <div class="comparison-container">
        <div class="comparison-box old">
          <h4>âŒ ä¼ ç»Ÿå¤šçº¿ç¨‹</h4>
          <pre><code>{{ comparison.old.code }}</code></pre>
          <p>{{ comparison.old.caption }}</p>
        </div>
        <div class="comparison-box new">
          <h4>âœ… Zoo Framework</h4>
          <pre><code>{{ comparison.new.code }}</code></pre>
          <p>{{ comparison.new.caption }}</p>
        </div>
      </div>
    </div>

    <!-- æ¦‚å¿µæ˜ å°„ -->
    <div class="mapping-section">
      <div class="mapping-header">
        <h3>ğŸ§  æ˜“ç†è§£çš„è®¾è®¡æ˜ å°„</h3>
      </div>
      <table class="mapping-table">
        <thead>
          <tr>
            <th>ğŸª åŠ¨ç‰©å›­æ¦‚å¿µ</th>
            <th>ğŸ’» ç¼–ç¨‹æ¦‚å¿µ</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="row in mapping" :key="row.key">
            <td>
              <span class="zoo-concept-cell">{{ row.left }}</span>
            </td>
            <td>{{ row.right }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- æ¸¸è§ˆæŒ‡å— -->
    <div class="guide-section">
      <div class="guide-header">
        <h2>ğŸ“š æ¸¸è§ˆæŒ‡å—</h2>
      </div>
      <div class="guide-grid">
        <div v-for="box in guide" :key="box.key" class="guide-box">
          <h4>{{ box.title }}</h4>
          <ul>
            <li v-for="item in box.items" :key="item.href">
              <a :href="item.href">{{ item.text }}</a> - {{ item.desc }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- é¡µè„š -->
    <div class="footer-section">
      <div class="footer-links">
        <a href="https://github.com/YearsAlso/zoo-framework">GitHub</a> |
        <a href="https://github.com/YearsAlso/zoo-framework/issues">Issues</a> |
        <a href="https://github.com/YearsAlso/zoo-framework-doc">æ–‡æ¡£ä»“åº“</a>
      </div>
      <p>ğŸª Made with â¤ï¸ by Zoo Framework Team ğŸ¦</p>
    </div>
  </div>
</template>

<script setup lang="ts">
const concepts = [
  { key: 'worker', icon: 'ğŸ¦', title: 'Worker', desc: 'åŠ¨ç‰©å·¥ä½œå™¨' },
  { key: 'cage', icon: 'ğŸ ', title: 'Cage', desc: 'ç¬¼å­ç®¡ç†' },
  { key: 'master', icon: 'ğŸ‘¨â€ğŸ’¼', title: 'Master', desc: 'å›­é•¿å¤§äºº' },
  { key: 'event', icon: 'ğŸ–', title: 'Event', desc: 'é£Ÿç‰©äº‹ä»¶' },
  { key: 'fifo', icon: 'ğŸ“Š', title: 'FIFO', desc: 'é¥²å…»å‘˜é˜Ÿåˆ—' },
  { key: 'state', icon: 'ğŸ—ºï¸', title: 'State', desc: 'çŠ¶æ€å›¾' }
]

const workflow = [
  { num: 1, title: 'ğŸŒ… æ™¨æ£€', desc: 'Master æ£€æŸ¥æ‰€æœ‰ Worker çŠ¶æ€' },
  { num: 2, title: 'ğŸ– å–‚é£Ÿ', desc: 'FIFO æŒ‰ä¼˜å…ˆçº§åˆ†å‘ Event' },
  { num: 3, title: 'ğŸ”„ å·¥ä½œ', desc: 'Worker åœ¨ Cage ä¸­æ‰§è¡Œä»»åŠ¡' },
  { num: 4, title: 'ğŸ“Š è®°å½•', desc: 'StateMachine æ›´æ–°çŠ¶æ€' },
  { num: 5, title: 'ğŸŒ™ ä¼‘æ¯', desc: 'ä¿å­˜æ•°æ®ï¼Œç­‰å¾…ä¸‹ä¸€è½®' }
]

const animals = [
  { key: 'lion', emoji: 'ğŸ¦', name: 'ç‹®å­', desc: 'é«˜ä¼˜å…ˆçº§ Worker<br>å‡¶çŒ›ã€æŠ¢å èµ„æº' },
  { key: 'monkey', emoji: 'ğŸ’', name: 'çŒ´å­', desc: 'æ™®é€š Worker<br>çµæ´»ã€å¾ªç¯æ‰§è¡Œ' },
  { key: 'sloth', emoji: 'ğŸ¦¥', name: 'æ ‘æ‡’', desc: 'å»¶è¿Ÿ Worker<br>æ…¢ååã€å®šæ—¶ä»»åŠ¡' },
  { key: 'eagle', emoji: 'ğŸ¦…', name: 'è€é¹°', desc: 'äº‹ä»¶ Worker<br>æ•é”ã€å“åº”è¿…é€Ÿ' },
  { key: 'elephant', emoji: 'ğŸ˜', name: 'å¤§è±¡', desc: 'çŠ¶æ€æœº Worker<br>ç¨³é‡ã€ç®¡ç†çŠ¶æ€' }
]

const quickSteps = [
  { key: 'install', icon: 'ğŸ«', title: 'ä¹°ç¥¨å®‰è£…', code: 'pip install zoo-framework' },
  { key: 'create', icon: 'ğŸ—ï¸', title: 'æ­å»ºåŠ¨ç‰©å›­', code: 'zfc --create my_zoo\ncd my_zoo' },
  { key: 'lion', icon: 'ğŸ¦', title: 'å…»ä¸€åªç‹®å­', code: 'class LionWorker(BaseWorker):\n    def _execute(self):\n        print("å¼ï¼")' },
  { key: 'run', icon: 'ğŸª', title: 'å¼€å›­ï¼', code: 'master = Master()\nmaster.run()' }
]

const comparison = {
  old: {
    code: 'import threading\nt = threading.Thread(target=func)\nt.start()\nt.join()',
    caption: 'æ¯ç‡¥çš„ Thread ç®¡ç† ğŸ˜´'
  },
  new: {
    code: 'class LionWorker(BaseWorker):\n    def _execute(self):\n        print("ğŸ¦ å¼ï¼")',
    caption: 'æœ‰è¶£çš„åŠ¨ç‰©å›­ç®¡ç† ğŸ¦ğŸª'
  }
}

const mapping = [
  { key: 'm1', left: 'ğŸ¦ åŠ¨ç‰©', right: 'Worker å·¥ä½œå™¨' },
  { key: 'm2', left: 'ğŸ  ç¬¼å­', right: 'Cage çº¿ç¨‹ç®¡ç†' },
  { key: 'm3', left: 'ğŸ‘¨â€ğŸ’¼ å›­é•¿', right: 'Master è°ƒåº¦å™¨' },
  { key: 'm4', left: 'ğŸ– é£Ÿç‰©', right: 'Event äº‹ä»¶' },
  { key: 'm5', left: 'ğŸ“Š é¥²å…»å‘˜', right: 'FIFO é˜Ÿåˆ—' },
  { key: 'm6', left: 'ğŸ—ºï¸ çŠ¶æ€å›¾', right: 'StateMachine' }
]

const guide = [
  {
    key: 'g1',
    title: 'ğŸ”° æ–°æ‰‹å…¥å›­',
    items: [
      { href: '/start/', text: 'ğŸ« å…¥å›­æŒ‡å—', desc: '5åˆ†é’Ÿä¸Šæ‰‹' },
      { href: '/start/new.html', text: 'ğŸ—ï¸ æ­å»ºåŠ¨ç‰©å›­', desc: 'åˆ›å»ºé¡¹ç›®' },
      { href: '/guide/structure.html', text: 'ğŸ—ºï¸ åŠ¨ç‰©å›­å¸ƒå±€', desc: 'äº†è§£ç»“æ„' }
    ]
  },
  {
    key: 'g2',
    title: 'ğŸ¦ è®¤è¯†åŠ¨ç‰©',
    items: [
      { href: '/core/worker.html', text: 'ğŸ¦ Worker åŠ¨ç‰©', desc: 'åŠ¨ç‰©ç‰¹ç‚¹' },
      { href: '/core/cage.html', text: 'ğŸ  Cage ç¬¼å­', desc: 'åŠ¨ç‰©çš„å®¶' },
      { href: '/core/event.html', text: 'ğŸ– Event é£Ÿç‰©', desc: 'å–‚å…»ç³»ç»Ÿ' },
      { href: '/core/statemachine.html', text: 'ğŸ—ºï¸ çŠ¶æ€å›¾', desc: 'å¿ƒæƒ…å˜åŒ–' },
      { href: '/core/fifo.html', text: 'ğŸ“Š FIFO é¥²å…»å‘˜', desc: 'åˆ†å‘æœºåˆ¶' }
    ]
  },
  {
    key: 'g3',
    title: 'ğŸª é«˜çº§é©¯å…½',
    items: [
      { href: '/advanced/aop.html', text: 'âœ‚ï¸ AOP é©¯å…½', desc: '' },
      { href: '/advanced/reactor.html', text: 'âš¡ Reactor è®­ç»ƒ', desc: '' },
      { href: '/advanced/lock.html', text: 'ğŸ”’ Cage å®‰å…¨', desc: '' },
      { href: '/advanced/plugin.html', text: 'ğŸ”Œ å¼•å…¥æ–°ç‰©ç§', desc: '' }
    ]
  }
]
</script>

<style scoped>
/* åœ£æ¯å¸ƒå±€å®¹å™¨ */
.holy-grail-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* åŠ¨ç‰©å›­ç†å¿µåŒºåŸŸ - å·¦ä¾§æ¦‚å¿µ + ä¸­é—´æ¶æ„ + å³ä¾§è¯´æ˜ */
.zoo-concept-section {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 16px;
  padding: 3rem 2rem;
  margin: 3rem 0;
}

.zoo-concept-header {
  text-align: center;
  margin-bottom: 2rem;
}

.zoo-concept-header h2 {
  color: #2c3e50;
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.zoo-concept-header p {
  color: #6c757d;
  font-size: 1.1rem;
}

/* åœ£æ¯å¸ƒå±€ä¸»ä½“ */
.holy-grail-body {
  display: grid;
  grid-template-columns: 280px 1fr 280px;
  gap: 2rem;
  align-items: start;
}

@media (max-width: 1200px) {
  .holy-grail-body {
    grid-template-columns: 1fr;
  }
  .left-sidebar,
  .right-sidebar {
    order: 2;
  }
  .main-content {
    order: 1;
  }
}

/* å·¦ä¾§è¾¹æ  - æ ¸å¿ƒæ¦‚å¿µ */
.left-sidebar {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  border-left: 4px solid #42b883;
}

.left-sidebar h3 {
  color: #2c3e50;
  font-size: 1.2rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.concept-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.concept-list li {
  padding: 0.8rem 0;
  border-bottom: 1px solid #f0f0f0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.concept-list li:last-child {
  border-bottom: none;
}

.concept-icon {
  font-size: 1.5rem;
  width: 2rem;
  text-align: center;
}

.concept-text {
  flex: 1;
}

.concept-text strong {
  display: block;
  color: #2c3e50;
  font-size: 0.95rem;
}

.concept-text small {
  color: #6c757d;
  font-size: 0.8rem;
}

/* ä¸­é—´ä¸»è¦å†…å®¹ - æ¶æ„å›¾ */
.main-content {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.main-content h3 {
  text-align: center;
  color: #2c3e50;
  margin-bottom: 1.5rem;
  font-size: 1.3rem;
}

/* å³ä¾§è¾¹æ  - å·¥ä½œæµç¨‹ */
.right-sidebar {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  border-right: 4px solid #667eea;
}

.right-sidebar h3 {
  color: #2c3e50;
  font-size: 1.2rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.workflow-step {
  display: flex;
  gap: 0.8rem;
  padding: 0.8rem 0;
  border-bottom: 1px solid #f0f0f0;
}

.workflow-step:last-child {
  border-bottom: none;
}

.step-num {
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.step-content strong {
  display: block;
  color: #2c3e50;
  font-size: 0.9rem;
  margin-bottom: 0.2rem;
}

.step-content small {
  color: #6c757d;
  font-size: 0.8rem;
}

/* åŠ¨ç‰©ç±»å‹å¡ç‰‡ */
.animal-types-section {
  margin: 3rem 0;
}

.animal-types-header {
  text-align: center;
  margin-bottom: 2rem;
}

.animal-types-header h2 {
  color: #2c3e50;
  font-size: 1.8rem;
}

.animal-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
}

.animal-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: transform 0.2s, box-shadow 0.2s;
  border-top: 4px solid;
}

.animal-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.animal-card.lion {
  border-top-color: #e74c3c;
}
.animal-card.monkey {
  border-top-color: #f39c12;
}
.animal-card.sloth {
  border-top-color: #27ae60;
}
.animal-card.eagle {
  border-top-color: #3498db;
}
.animal-card.elephant {
  border-top-color: #9b59b6;
}

.animal-emoji {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.animal-card h4 {
  color: #2c3e50;
  margin: 0.5rem 0;
  font-size: 1.1rem;
}

.animal-card p {
  color: #6c757d;
  font-size: 0.85rem;
  margin: 0;
}

/* å¿«é€Ÿå¼€å§‹åŒºåŸŸ */
.quick-start-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  padding: 3rem 2rem;
  margin: 3rem 0;
  color: white;
}

.quick-start-header {
  text-align: center;
  margin-bottom: 2rem;
}

.quick-start-header h2 {
  color: white;
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
}

.quick-start-header p {
  opacity: 0.9;
}

.quick-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1.5rem;
}

.quick-step {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 1.5rem;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.quick-step-header {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 1rem;
}

.step-icon {
  font-size: 1.5rem;
}

.quick-step-header strong {
  color: white;
  font-size: 1rem;
}

.quick-step pre {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 8px;
  padding: 0.8rem;
  margin: 0;
  overflow-x: auto;
}

.quick-step code {
  color: #fff;
  font-size: 0.85rem;
}

/* ä¸ºä»€ä¹ˆé€‰æ‹© */
.why-section {
  margin: 3rem 0;
}

.why-header {
  text-align: center;
  margin-bottom: 2rem;
}

.why-header h2 {
  color: #2c3e50;
  font-size: 1.8rem;
}

.comparison-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

@media (max-width: 768px) {
  .comparison-container {
    grid-template-columns: 1fr;
  }
}

.comparison-box {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.comparison-box h4 {
  margin-top: 0;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid #e9ecef;
  color: #2c3e50;
}

.comparison-box.old h4 {
  border-bottom-color: #e74c3c;
}

.comparison-box.new h4 {
  border-bottom-color: #27ae60;
}

.comparison-box pre {
  background: #1e1e1e;
  color: #d4d4d4;
  padding: 1rem;
  border-radius: 8px;
  overflow-x: auto;
  margin: 0;
}

.comparison-box p {
  color: #6c757d;
  margin-top: 1rem;
  text-align: center;
}

/* æ¦‚å¿µæ˜ å°„è¡¨ */
.mapping-section {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 2rem;
  margin: 3rem 0;
}

.mapping-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.mapping-header h3 {
  color: #2c3e50;
}

.mapping-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.mapping-table th {
  background: linear-gradient(135deg, #42b883 0%, #35495e 100%);
  color: white;
  padding: 1rem;
  text-align: left;
  font-weight: 600;
}

.mapping-table td {
  padding: 1rem;
  border-bottom: 1px solid #e9ecef;
}

.mapping-table tr:last-child td {
  border-bottom: none;
}

.mapping-table tr:hover {
  background: #f8f9fa;
}

.zoo-concept-cell {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

/* å¯¼èˆªåŒºåŸŸ */
.guide-section {
  margin: 3rem 0;
}

.guide-header {
  text-align: center;
  margin-bottom: 2rem;
}

.guide-header h2 {
  color: #2c3e50;
  font-size: 1.8rem;
}

.guide-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.guide-box {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border-top: 4px solid #42b883;
}

.guide-box h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.guide-box ul {
  margin: 0;
  padding-left: 1.2rem;
}

.guide-box li {
  margin: 0.6rem 0;
}

.guide-box a {
  color: #42b883;
  text-decoration: none;
}

.guide-box a:hover {
  text-decoration: underline;
}

/* é¡µè„š */
.footer-section {
  text-align: center;
  padding: 2rem;
  margin-top: 3rem;
  border-top: 1px solid #e9ecef;
}

.footer-links {
  margin-bottom: 1rem;
}

.footer-links a {
  color: #42b883;
  text-decoration: none;
  margin: 0 0.5rem;
}

.footer-links a:hover {
  text-decoration: underline;
}
</style>
